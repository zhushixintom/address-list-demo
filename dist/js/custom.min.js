/** 
* Contact List V1.0.0 
* By Tom Zhu
*/
!function(){"use strict";function t(t){var o=t.url,a=$(t.input),s=$(t.output);$.ajax({url:o,method:"GET",dataType:"json",data:{}}).done(function(t){$("#loading").modal("hide"),$.contacts.list.people=t,e($.contacts.list.people),$.contacts.searchContacts(t,a,s),console.log("success")}).fail(function(){console.log("error"),$(".container").html("<div class='text-center'>Network error, please contact the administrator!</div>")}).always(function(){console.log("complete")})}function e(t){if(0!=t.length){t.sort(s("name"));for(var e="",o=[],a=0,c=0,n=0,l=0;l<=t.length;l++){var p={};if(0==l)e=t[0].name.slice(0,1).toUpperCase(),p.capital=e,c=0,o.push(p),o.push(t[l]);else if(l<t.length){var i=t[l].name.slice(0,1).toUpperCase();i==e?o.push(t[l]):(p.capital=i,o.push(p),n++,o.push(t[l]),o[c].dindex=a,a=0,c=l+n),e=i}else o[c].dindex=a;a++}var r=Template7.compile($("#contactsTpl").html());$.contacts.showList.people=o;var h=r($.contacts.showList);$("#contact-list .list-group").html("").append(h)}}function o(t,o,s){var c,n=[];n.alphabet=!0;for(var l,p=0;p<=t.length-1;p++)l=p,n.push(t[l].name.toLowerCase());o.on("input propertychange",function(){c=o.val().toLowerCase(),""==c&&e($.contacts.list.people),$.contacts.searchList.people=[];var t=0;0==a&&1==n.alphabet?(n.reverse(),n.alphabet=!1):1==a&&0==n.alphabet&&(n.reverse(),n.alphabet=!0);for(var s=0;s<=n.length-1;s++)t=s,n[s].indexOf(c)>=0&&$.contacts.searchList.people.push($.contacts.list.people[t]);0==$.contacts.searchList.people.length?($("#contact-list .bg-warning").removeClass("hide"),console.log(a),e($.contacts.list.people)):($("#contact-list .bg-warning").addClass("hide"),e($.contacts.searchList.people))})}$.contacts=$.contacts||{},$.contacts.getContacts=t,$.contacts.searchContacts=o,$.contacts.list={},$.contacts.showList={},$.contacts.searchList={},$.contacts.searchList.people=[];var a=!0,s=function(t){return function(e,o){var s,c;if("object"==typeof e&&"object"==typeof o&&e&&o)return s=e[t],c=o[t],s===c?0:0==a?typeof s==typeof c?s<c?1:-1:typeof s<typeof c?1:-1:typeof s==typeof c?s<c?-1:1:typeof s<typeof c?-1:1;throw"error"}};$("#myModal").on("show.bs.modal",function(t){var e=$(t.relatedTarget),o=e.data("id"),a=$(this),s=$.contacts.list.people.filter(function(t){return t.id==o}),c=Template7.compile($("#singleContactsTpl").html()),n=c(s[0]);a.find(".modal-title").text(s[0].name),a.find(".modal-body").html(n)}),$(".sort").on("click",function(){$(this).find("span").hasClass("glyphicon-sort-by-alphabet")?($(this).find("span").removeClass("glyphicon-sort-by-alphabet").addClass("glyphicon-sort-by-alphabet-alt"),a=!1):($(this).find("span").removeClass("glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort-by-alphabet"),a=!0),0==$.contacts.searchList.people.length?e($.contacts.list.people):($.contacts.list.people.sort(s("name")),e($.contacts.searchList.people))})}($),$.contacts.getContacts({url:"http://jsonplaceholder.typicode.com/users",input:"#search-input",output:"#search-res"});